<Window x:Class="LineageLauncher.App.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:ui="http://schemas.modernwpf.com/2019"
        ui:WindowHelper.UseModernWindowStyle="True"
        Title="L1R Launcher"
        Height="650"
        Width="950"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanMinimize"
        Background="{DynamicResource SystemControlBackgroundAltHighBrush}">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Full Window Background Image -->
        <Border Grid.Row="0"
                Grid.RowSpan="3">
            <Border.Background>
                <ImageBrush ImageSource="/Assets/background.jpg"
                           Stretch="UniformToFill" />
            </Border.Background>
        </Border>

        <!-- Header Bar -->
        <Border Grid.Row="0"
                Background="#CC000000"
                Padding="24,16">
            <TextBlock Text="Lineage Remaster"
                      FontSize="20"
                      FontWeight="Bold"
                      Foreground="{DynamicResource SystemControlForegroundAccentBrush}"
                      HorizontalAlignment="Center"
                      VerticalAlignment="Center" />
        </Border>

        <!-- Action Bar -->
        <Border Grid.Row="2"
                Background="#DD000000"
                Padding="24,20"
                BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}"
                BorderThickness="0,1,0,0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <!-- Game Status Indicator -->
                <StackPanel Grid.Column="0"
                           Orientation="Horizontal"
                           VerticalAlignment="Center">
                    <Ellipse Width="10"
                            Height="10"
                            Margin="0,0,8,0">
                        <Ellipse.Fill>
                            <SolidColorBrush Color="{Binding IsGameReady, Converter={StaticResource BoolToColorConverter}}" />
                        </Ellipse.Fill>
                    </Ellipse>
                    <TextBlock FontSize="13"
                              VerticalAlignment="Center">
                        <TextBlock.Text>
                            <MultiBinding StringFormat="{}{0}">
                                <Binding Path="IsGameReady" />
                            </MultiBinding>
                        </TextBlock.Text>
                        <TextBlock.Style>
                            <Style TargetType="TextBlock">
                                <Setter Property="Text" Value="Game Ready" />
                                <Setter Property="Foreground" Value="{DynamicResource SystemControlForegroundBaseMediumBrush}" />
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsGameReady}" Value="False">
                                        <Setter Property="Text" Value="Checking Updates..." />
                                    </DataTrigger>
                                    <DataTrigger Binding="{Binding IsGameReady}" Value="True">
                                        <Setter Property="Text" Value="Ready to Play!" />
                                        <Setter Property="Foreground" Value="#4CAF50" />
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </TextBlock.Style>
                    </TextBlock>
                </StackPanel>

                <!-- Patch Progress Section -->
                <StackPanel Grid.Column="1"
                           VerticalAlignment="Center"
                           HorizontalAlignment="Center"
                           Margin="32,0">
                    <!-- Progress Bar -->
                    <ProgressBar Value="{Binding PatchProgress}"
                                Minimum="0"
                                Maximum="100"
                                Height="8"
                                Width="300"
                                Visibility="{Binding IsPatching, Converter={StaticResource BoolToVisibilityConverter}}"
                                Margin="0,0,0,8" />

                    <!-- Patch Status Text -->
                    <TextBlock Text="{Binding PatchStatus}"
                              FontSize="12"
                              Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                              HorizontalAlignment="Center"
                              Visibility="{Binding IsPatching, Converter={StaticResource BoolToVisibilityConverter}}" />

                    <!-- Detailed Status Text -->
                    <TextBlock Text="{Binding DetailedStatus}"
                              FontSize="11"
                              Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                              Opacity="0.8"
                              HorizontalAlignment="Center"
                              Margin="0,4,0,0"
                              Visibility="{Binding IsPatching, Converter={StaticResource BoolToVisibilityConverter}}" />
                </StackPanel>

                <!-- Launch Button -->
                <Button Grid.Column="2"
                       Content="Launch"
                       Command="{Binding StartGameCommand}"
                       Click="LaunchButton_Click"
                       Style="{StaticResource AccentButtonStyle}"
                       Width="200"
                       Height="48"
                       FontSize="16"
                       FontWeight="Bold">
                    <Button.ContentTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal"
                                       HorizontalAlignment="Center">
                                <TextBlock Text="â–¶"
                                          FontSize="14"
                                          Margin="0,0,8,0"
                                          VerticalAlignment="Center" />
                                <TextBlock Text="Launch"
                                          VerticalAlignment="Center" />
                            </StackPanel>
                        </DataTemplate>
                    </Button.ContentTemplate>
                </Button>
            </Grid>
        </Border>
    </Grid>
</Window>
